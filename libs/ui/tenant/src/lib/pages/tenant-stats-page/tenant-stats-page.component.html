<main class="p-4" *ngIf="tenant$ | async as tenant">
  <h1 class="font-mono font-black mb-4">Statistics HQ</h1>
  <tumi-grid class="mb-4">
    <div class="kpi">
      <p class="title">Registered Users</p>
      <p class="value">{{ tenant.statistics.usersRegistered }}</p>
    </div>
    <div class="kpi">
      <p class="title">Users with stripe customer</p>
      <p class="value">{{ tenant.statistics.usersWithCustomer }}</p>
    </div>
    <div class="kpi">
      <p class="title">Users with payment method</p>
      <p class="value">{{ tenant.statistics.usersWithPaymentMethod }}</p>
    </div>
    <div class="kpi">
      <p class="title">Events</p>
      <p class="value">{{ tenant.statistics.totalEvents }}</p>
    </div>
    <div class="kpi">
      <p class="title">Paid Events</p>
      <p class="value">{{ tenant.statistics.paidEvents }}</p>
    </div>
    <div class="kpi">
      <p class="title">Average events price</p>
      <p class="value">
        {{ tenant.statistics.averageEventCost | currency: 'EUR' }}
      </p>
    </div>

    <div class="kpi">
      <p class="title">Registrations</p>
      <p class="value">{{ tenant.statistics.registrations }}</p>
    </div>
    <div class="kpi">
      <p class="title">Paid registrations</p>
      <p class="value">{{ tenant.statistics.paidRegistrations }}</p>
    </div>
    <div class="kpi">
      <p class="title">Total net payments</p>
      <p class="value">
        {{ tenant.statistics.totalNetPayments | currency: 'EUR' }}
      </p>
    </div>
    <div class="kpi">
      <p class="title">Check ins</p>
      <p class="value">{{ tenant.statistics.checkins }}</p>
    </div>
    <div class="kpi">
      <p class="title">Users who registered for Events</p>
      <p class="value">{{ tenant.statistics.usersRegisteredEvents }}</p>
    </div>
    <div class="kpi">
      <p class="title">Users who registered for free Events</p>
      <p class="value">{{ tenant.statistics.usersRegisteredFreeEvents }}</p>
    </div>
    <div class="kpi">
      <p class="title">Users who registered for paid Events</p>
      <p class="value">{{ tenant.statistics.usersRegisteredPaidEvents }}</p>
    </div>
  </tumi-grid>
  <div class="my-4 relative">
    <ngx-charts-line-chart
      [results]="tenant.statistics.userHistory"
      [legend]="true"
      [yAxis]="true"
      [xAxis]="true"
      [view]="[700, 300]"
      [legendPosition]="legendPosition"
      legendTitle="Users"
      class="relative"
    ></ngx-charts-line-chart>
  </div>
  <div class="my-4 relative">
    <ngx-charts-line-chart
      [results]="tenant.statistics.registrationHistory"
      [legend]="true"
      [yAxis]="true"
      [xAxis]="true"
      [view]="[700, 300]"
      [legendPosition]="legendPosition"
      legendTitle="Registrations"
      class="relative"
    ></ngx-charts-line-chart>
  </div>
  <div class="my-4 relative">
    <ngx-charts-line-chart
      [results]="tenant.statistics.refundHistory"
      [legend]="true"
      [yAxis]="true"
      [xAxis]="true"
      [view]="[700, 300]"
      [legendPosition]="legendPosition"
      legendTitle="Refunds"
      class="relative"
    ></ngx-charts-line-chart>
  </div>
  <div class="my-4 relative">
    <ngx-charts-pie-chart
      [results]="tenant.statistics.userEventDistribution"
      [legend]="true"
      [view]="[700, 300]"
      [legendPosition]="legendPosition"
      legendTitle="Event registrations"
      class="relative"
    ></ngx-charts-pie-chart>
  </div>
  <br />
  <!--  <pre>{{ tenant | json }}</pre>-->
</main>
